"use client"

import { useState, useMemo, useEffect } from "react"
import { Input } from "@/components/ui/input"
import { X } from "lucide-react"

const TIMEZONES = [
  "Africa/Abidjan",
  "Africa/Accra",
  "Africa/Addis_Ababa",
  "Africa/Algiers",
  "Africa/Asmara",
  "Africa/Bamako",
  "Africa/Bangui",
  "Africa/Banjul",
  "Africa/Bissau",
  "Africa/Blantyre",
  "Africa/Brazzaville",
  "Africa/Bujumbura",
  "Africa/Cairo",
  "Africa/Casablanca",
  "Africa/Ceuta",
  "Africa/Conakry",
  "Africa/Dakar",
  "Africa/Dar_es_Salaam",
  "Africa/Djibouti",
  "Africa/Douala",
  "Africa/El_Aaiun",
  "Africa/Freetown",
  "Africa/Gaborone",
  "Africa/Harare",
  "Africa/Johannesburg",
  "Africa/Juba",
  "Africa/Kampala",
  "Africa/Khartoum",
  "Africa/Kigali",
  "Africa/Kinshasa",
  "Africa/Lagos",
  "Africa/Libreville",
  "Africa/Lilongwe",
  "Africa/Lome",
  "Africa/Luanda",
  "Africa/Lubumbashi",
  "Africa/Lusaka",
  "Africa/Malabo",
  "Africa/Maputo",
  "Africa/Maseru",
  "Africa/Mbabane",
  "Africa/Mogadishu",
  "Africa/Monrovia",
  "Africa/Montserrado",
  "Africa/Nairobi",
  "Africa/Ndjamena",
  "Africa/Niamey",
  "Africa/Nouakchott",
  "Africa/Ouagadougou",
  "Africa/Porto-Novo",
  "Africa/Sao_Tome",
  "Africa/Tripoli",
  "Africa/Tunis",
  "Africa/Windhoek",
  "America/Adak",
  "America/Anchorage",
  "America/Anguilla",
  "America/Antigua",
  "America/Araguaina",
  "America/Argentina/Buenos_Aires",
  "America/Argentina/Catamarca",
  "America/Argentina/ComodRivadavia",
  "America/Argentina/Cordoba",
  "America/Argentina/Jujuy",
  "America/Argentina/La_Rioja",
  "America/Argentina/Mendoza",
  "America/Argentina/Rio_Gallegos",
  "America/Argentina/Salta",
  "America/Argentina/San_Juan",
  "America/Argentina/San_Luis",
  "America/Argentina/Tucuman",
  "America/Argentina/Ushuaia",
  "America/Aruba",
  "America/Asuncion",
  "America/Atikokan",
  "America/Atka",
  "America/Bahia",
  "America/Bahia_Banderas",
  "America/Barbados",
  "America/Belem",
  "America/Belize",
  "America/Blanc-Sablon",
  "America/Boa_Vista",
  "America/Bogota",
  "America/Boise",
  "America/Buenos_Aires",
  "America/Cambridge_Bay",
  "America/Campo_Grande",
  "America/Cancun",
  "America/Caracas",
  "America/Catamarca",
  "America/Cayenne",
  "America/Cayman",
  "America/Chicago",
  "America/Chihuahua",
  "America/Coral_Harbour",
  "America/Cordoba",
  "America/Costa_Rica",
  "America/Creston",
  "America/Cuiaba",
  "America/Curacao",
  "America/Danmarkshavn",
  "America/Dawson",
  "America/Dawson_Creek",
  "America/Denver",
  "America/Detroit",
  "America/Dominica",
  "America/Edmonton",
  "America/Eirunepe",
  "America/El_Salvador",
  "America/Ensenada",
  "America/Fort_Nelson",
  "America/Fort_Wayne",
  "America/Fortaleza",
  "America/Glace_Bay",
  "America/Godthab",
  "America/Goose_Bay",
  "America/Grand_Turk",
  "America/Grenada",
  "America/Guadeloupe",
  "America/Guam",
  "America/Guatemala",
  "America/Guayaquil",
  "America/Guyana",
  "America/Halifax",
  "America/Havana",
  "America/Hermosillo",
  "America/Indiana/Indianapolis",
  "America/Indiana/Knox",
  "America/Indiana/Marengo",
  "America/Indiana/Petersburg",
  "America/Indiana/Tell_City",
  "America/Indiana/Vevay",
  "America/Indiana/Vincennes",
  "America/Indiana/Winamac",
  "America/Indianapolis",
  "America/Inuvik",
  "America/Iqaluit",
  "America/Jamaica",
  "America/Jujuy",
  "America/Juneau",
  "America/Kentucky/Louisville",
  "America/Kentucky/Monticello",
  "America/Knox_IN",
  "America/Kralendijk",
  "America/La_Paz",
  "America/Lima",
  "America/Los_Angeles",
  "America/Louisville",
  "America/Lower_Princes",
  "America/Maceio",
  "America/Managua",
  "America/Manaus",
  "America/Marigot",
  "America/Martinique",
  "America/Matamoros",
  "America/Mazatlan",
  "America/Mendoza",
  "America/Menominee",
  "America/Merida",
  "America/Metlakatla",
  "America/Mexico_City",
  "America/Miquelon",
  "America/Moncton",
  "America/Monterrey",
  "America/Montevideo",
  "America/Montreal",
  "America/Montserrat",
  "America/Nassau",
  "America/New_York",
  "America/NewFoundland",
  "America/Nipissing",
  "America/Nome",
  "America/Noronha",
  "America/North_Dakota/Beulah",
  "America/North_Dakota/Center",
  "America/North_Dakota/New_Salem",
  "America/Nuuk",
  "America/Ojinaga",
  "America/Panama",
  "America/Pangnirtung",
  "America/Paramaribo",
  "America/Phoenix",
  "America/Port-au-Prince",
  "America/Port_of_Spain",
  "America/Porto_Acre",
  "America/Porto_Velho",
  "America/Puerto_Rico",
  "America/Punta_Arenas",
  "America/Rainy_River",
  "America/Rankin_Inlet",
  "America/Recife",
  "America/Regina",
  "America/Resolute",
  "America/Rio_Branco",
  "America/Rosario",
  "America/Santa_Isabel",
  "America/Santarem",
  "America/Santiago",
  "America/Santo_Domingo",
  "America/Sao_Paulo",
  "America/Scoresbysund",
  "America/Shiprock",
  "America/Sitka",
  "America/St_Barthelemy",
  "America/St_Johns",
  "America/St_Kitts",
  "America/St_Lucia",
  "America/St_Thomas",
  "America/St_Vincent",
  "America/Swift_Current",
  "America/Tegucigalpa",
  "America/Thule",
  "America/Thunder_Bay",
  "America/Tijuana",
  "America/Toronto",
  "America/Tortola",
  "America/Vancouver",
  "America/Virgin",
  "America/Whitehorse",
  "America/Winnipeg",
  "America/Yakutat",
  "America/Yellowknife",
  "Asia/Aden",
  "Asia/Almaty",
  "Asia/Amman",
  "Asia/Anadyr",
  "Asia/Aqtau",
  "Asia/Aqtobe",
  "Asia/Ashgabat",
  "Asia/Ashkhabad",
  "Asia/Atyrau",
  "Asia/Baghdad",
  "Asia/Bahrain",
  "Asia/Baku",
  "Asia/Bangkok",
  "Asia/Barnaul",
  "Asia/Beirut",
  "Asia/Bishkek",
  "Asia/Bloemfontein",
  "Asia/Brunei",
  "Asia/Calcutta",
  "Asia/Chita",
  "Asia/Choibalsan",
  "Asia/Chongqing",
  "Asia/Chungking",
  "Asia/Colombo",
  "Asia/Comoro",
  "Asia/Dacca",
  "Asia/Damascus",
  "Asia/Dhaka",
  "Asia/Dili",
  "Asia/Dubai",
  "Asia/Dushanbe",
  "Asia/Famagusta",
  "Asia/Gaza",
  "Asia/Harbin",
  "Asia/Hebron",
  "Asia/Ho_Chi_Minh",
  "Asia/Hong_Kong",
  "Asia/Hovd",
  "Asia/Irkutsk",
  "Asia/Istanbul",
  "Asia/Jakarta",
  "Asia/Jayapura",
  "Asia/Jerusalem",
  "Asia/Kabul",
  "Asia/Kamchatka",
  "Asia/Karachi",
  "Asia/Kashgar",
  "Asia/Kathmandu",
  "Asia/Katmandu",
  "Asia/Khandyga",
  "Asia/Kolkata",
  "Asia/Krasnoyarsk",
  "Asia/Kuala_Lumpur",
  "Asia/Kuching",
  "Asia/Kuwait",
  "Asia/Kyoto",
  "Asia/Kyrgystan",
  "Asia/Lao",
  "Asia/Macau",
  "Asia/Macao",
  "Asia/Magadan",
  "Asia/Makassar",
  "Asia/Manila",
  "Asia/Mariehamn",
  "Asia/Marquesas",
  "Asia/Maseru",
  "Asia/Mauritius",
  "Asia/Mecca",
  "Asia/Medina",
  "Asia/Meymaneh",
  "Asia/Minsk",
  "Asia/Mogadishu",
  "Asia/Mohammadpur",
  "Asia/Moscow",
  "Asia/Muscat",
  "Asia/Mykonos",
  "Asia/Nicosia",
  "Asia/Novokuznetsk",
  "Asia/Novosibirsk",
  "Asia/Omsk",
  "Asia/Oral",
  "Asia/Osaka",
  "Asia/Osh",
  "Asia/Oyem",
  "Asia/Phnom_Penh",
  "Asia/Pontianak",
  "Asia/Pyongyang",
  "Asia/Qatar",
  "Asia/Qyzylorda",
  "Asia/Rangoon",
  "Asia/Riyadh",
  "Asia/Riyadh87",
  "Asia/Riyadh88",
  "Asia/Riyadh89",
  "Asia/Saigon",
  "Asia/Sakhalin",
  "Asia/Samarkand",
  "Asia/Samarqand",
  "Asia/Samoa",
  "Asia/Sapporo",
  "Asia/Saratov",
  "Asia/Seoul",
  "Asia/Seychelles",
  "Asia/Shanghai",
  "Asia/Shanghaiing",
  "Asia/Shenzhen",
  "Asia/Singapore",
  "Asia/Srednekolymsk",
  "Asia/Srinagar",
  "Asia/Suva",
  "Asia/Syktyvkar",
  "Asia/Taipei",
  "Asia/Tashkent",
  "Asia/Taskhent",
  "Asia/Tbilisi",
  "Asia/Tehran",
  "Asia/Tel_Aviv",
  "Asia/Thimbu",
  "Asia/Thimphu",
  "Asia/Tokyo",
  "Asia/Tomsk",
  "Asia/Tongatapu",
  "Asia/Ujung_Pandang",
  "Asia/Ulaanbaatar",
  "Asia/Ulan_Bator",
  "Asia/Uliastai",
  "Asia/Ural",
  "Asia/Urumqi",
  "Asia/Ust-Nera",
  "Asia/Uzhno-Sakhalinsk",
  "Asia/Vientiane",
  "Asia/Vladivostok",
  "Asia/Volgograd",
  "Asia/Yakutsk",
  "Asia/Yangon",
  "Asia/Yarkand",
  "Asia/Yerevan",
  "Asia/Yerevan",
  "Atlantic/Azores",
  "Atlantic/Bermuda",
  "Atlantic/Canary",
  "Atlantic/Cape_Verde",
  "Atlantic/Chatham",
  "Atlantic/Faroe",
  "Atlantic/Faeroe",
  "Atlantic/Faraday",
  "Atlantic/Godthab",
  "Atlantic/Goose_Bay",
  "Atlantic/Grandi_Turk",
  "Atlantic/Grenada",
  "Atlantic/Guadeloupe",
  "Atlantic/Guantanamo",
  "Atlantic/Guyana",
  "Atlantic/Halifax",
  "Atlantic/Havana",
  "Atlantic/Hopedale",
  "Atlantic/Jan_Mayen",
  "Atlantic/Johannesburg",
  "Atlantic/Jujuy",
  "Atlantic/Juneau",
  "Atlantic/Kerguelen",
  "Atlantic/Kermadec",
  "Atlantic/Kingstown",
  "Atlantic/Kiritimati",
  "Atlantic/Kosrae",
  "Atlantic/Krasnoyarsk",
  "Atlantic/Kuala_Lumpur",
  "Atlantic/Kuching",
  "Atlantic/Kuwait",
  "Atlantic/Kyoto",
  "Atlantic/Kyrgystan",
  "Atlantic/La_Paz",
  "Atlantic/Lagos",
  "Atlantic/Lahore",
  "Atlantic/Lao",
  "Atlantic/Laredo",
  "Atlantic/Las_Palmas",
  "Atlantic/Lima",
  "Atlantic/Lisbon",
  "Atlantic/London",
  "Atlantic/Londonderry",
  "Atlantic/Longyearbyen",
  "Atlantic/Lord_Howe",
  "Atlantic/Los_Angeles",
  "Atlantic/Louisville",
  "Atlantic/Lower_Princes",
  "Atlantic/Luanda",
  "Atlantic/Lubumbashi",
  "Atlantic/Lusaka",
  "Atlantic/Luxembourg",
  "Atlantic/Macao",
  "Atlantic/Macau",
  "Atlantic/Maceio",
  "Atlantic/Madeira",
  "Atlantic/Madrid",
  "Atlantic/Magadan",
  "Atlantic/Magallanes",
  "Atlantic/Makassar",
  "Atlantic/Malabo",
  "Atlantic/Malaga",
  "Atlantic/Malagasy",
  "Atlantic/Malawi",
  "Atlantic/Malaysia",
  "Atlantic/Maldives",
  "Atlantic/Mali",
  "Atlantic/Malta",
  "Atlantic/Managua",
  "Atlantic/Manaus",
  "Atlantic/Manchester",
  "Atlantic/Manila",
  "Atlantic/Manilla",
  "Atlantic/Maputo",
  "Atlantic/Maracaibo",
  "Atlantic/Maracay",
  "Atlantic/Margarita",
  "Atlantic/Marigot",
  "Atlantic/Mariupol",
  "Atlantic/Mariehamn",
  "Atlantic/Marquesas",
  "Atlantic/Marseille",
  "Atlantic/Martinique",
  "Atlantic/Maseru",
  "Atlantic/Mashhad",
  "Atlantic/Mauritius",
  "Atlantic/Mayaguez",
  "Atlantic/Mayotte",
  "Atlantic/Mazatlan",
  "Atlantic/Mecca",
  "Atlantic/Medina",
  "Atlantic/Meimaneh",
  "Atlantic/Melbourne",
  "Atlantic/Melekeok",
  "Atlantic/Mendoza",
  "Atlantic/Menominee",
  "Atlantic/Merida",
  "Atlantic/Meridian",
  "Atlantic/Merimbula",
  "Atlantic/Metlakatla",
  "Atlantic/Mexico_City",
  "Atlantic/Meymaneh",
  "Atlantic/Miami",
  "Atlantic/Miaouli",
  "Atlantic/Midway",
  "Atlantic/Mildura",
  "Atlantic/Miquelon",
  "Atlantic/Mirny",
  "Atlantic/Missoula",
  "Atlantic/Mitilini",
  "Atlantic/Moa",
  "Atlantic/Moanda",
  "Atlantic/Mocha",
  "Atlantic/Mochras",
  "Atlantic/Modena",
  "Atlantic/Mogadishu",
  "Atlantic/Mogilev",
  "Atlantic/Mohammadpur",
  "Atlantic/Mohe",
  "Atlantic/Moirang",
  "Atlantic/Moji",
  "Atlantic/Mojave",
  "Atlantic/Moka",
  "Atlantic/Mokha",
  "Atlantic/Molendo",
  "Atlantic/Molina",
  "Atlantic/Molins_de_Rei",
  "Atlantic/Mollendo",
  "Atlantic/Mollet",
  "Atlantic/Molln",
  "Atlantic/Molndal",
  "Atlantic/Molsheim",
  "Atlantic/Molteno",
  "Atlantic/Molucca",
  "Atlantic/Molveno",
  "Atlantic/Moma",
  "Atlantic/Momalla",
  "Atlantic/Momence",
  "Atlantic/Momignies",
  "Atlantic/Momiji",
  "Atlantic/Momiji_Gawa",
  "Atlantic/Momiji_Kaido",
  "Atlantic/Momiji_Kaido_Eki",
  "Atlantic/Momiji_Kaido_Guchi",
  "Atlantic/Momiji_Kaido_Kita",
  "Atlantic/Momiji_Kaido_Minami",
  "Atlantic/Momiji_Kaido_Nishi",
  "Atlantic/Momiji_Kaido_Higashi",
  "Atlantic/Momiji_Kaido_Chuo",
  "Atlantic/Momiji_Kaido_Ekimae",
  "Atlantic/Momiji_Kaido_Ekikita",
  "Atlantic/Momiji_Kaido_Ekiminami",
  "Atlantic/Momiji_Kaido_Ekinishi",
  "Atlantic/Momiji_Kaido_Ekihigashi",
  "Atlantic/Momiji_Kaido_Ekichuo",
  "Atlantic/Moncton",
  "Atlantic/Mondsee",
  "Atlantic/Monesterio",
  "Atlantic/Monestier",
  "Atlantic/Monestir",
  "Atlantic/Monestiriol",
  "Atlantic/Monestiriol_de_Montserrat",
  "Atlantic/Monestiriol_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell",
  "Atlantic/Monestiriol_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat",
  "Atlantic/Monestiriol_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_Vell_de_Montserrat_Vell",
  "UTC",
  "Europe/Amsterdam",
  "Europe/Andorra",
  "Europe/Astrakhan",
  "Europe/Athens",
  "Europe/Belfast",
  "Europe/Belgrade",
  "Europe/Berlin",
  "Europe/Bratislava",
  "Europe/Brussels",
  "Europe/Bucharest",
  "Europe/Budapest",
  "Europe/Busingen",
  "Europe/Chisinau",
  "Europe/Copenhagen",
  "Europe/Dublin",
  "Europe/Gibraltar",
  "Europe/Guernsey",
  "Europe/Helsinki",
  "Europe/Isle_of_Man",
  "Europe/Istanbul",
  "Europe/Jersey",
  "Europe/Kaliningrad",
  "Europe/Kiev",
  "Europe/Kirov",
  "Europe/Lisbon",
  "Europe/Ljubljana",
  "Europe/London",
  "Europe/Luxembourg",
  "Europe/Madrid",
  "Europe/Malta",
  "Europe/Mariehamn",
  "Europe/Minsk",
  "Europe/Monaco",
  "Europe/Moscow",
  "Europe/Nicosia",
  "Europe/Oslo",
  "Europe/Paris",
  "Europe/Prague",
  "Europe/Riga",
  "Europe/Rome",
  "Europe/Samara",
  "Europe/San_Marino",
  "Europe/Saratov",
  "Europe/Simferopol",
  "Europe/Skopje",
  "Europe/Sofia",
  "Europe/Stockholm",
  "Europe/Tallinn",
  "Europe/Tirane",
  "Europe/Ulyanovsk",
  "Europe/Vaduz",
  "Europe/Vatican",
  "Europe/Vienna",
  "Europe/Vilnius",
  "Europe/Volgograd",
  "Europe/Warsaw",
  "Europe/Zagreb",
  "Europe/Zurich",
  "Pacific/Apia",
  "Pacific/Auckland",
  "Pacific/Bougainville",
  "Pacific/Chatham",
  "Pacific/Chuuk",
  "Pacific/Easter",
  "Pacific/Efate",
  "Pacific/Enderbury",
  "Pacific/Fakaofo",
  "Pacific/Fiji",
  "Pacific/Funafuti",
  "Pacific/Galapagos",
  "Pacific/Gambier",
  "Pacific/Guadalcanal",
  "Pacific/Guam",
  "Pacific/Honolulu",
  "Pacific/Kiritimati",
  "Pacific/Kosrae",
  "Pacific/Kwajalein",
  "Pacific/Majuro",
  "Pacific/Marquesas",
  "Pacific/Midway",
  "Pacific/Nauru",
  "Pacific/Niue",
  "Pacific/Norfolk",
  "Pacific/Noumea",
  "Pacific/Pago_Pago",
  "Pacific/Palau",
  "Pacific/Pitcairn",
  "Pacific/Pohnpei",
  "Pacific/Port_Moresby",
  "Pacific/Rarotonga",
  "Pacific/Saipan",
  "Pacific/Samoa",
  "Pacific/Tahiti",
  "Pacific/Tarawa",
  "Pacific/Tongatapu",
  "Pacific/Truk",
  "Pacific/Wake",
  "Pacific/Wallis",
  "Pacific/Yap",
]

interface TimezoneSearchProps {
  onSelect: (timezone: string) => void
}

export default function TimezoneSearch({ onSelect }: TimezoneSearchProps) {
  const [search, setSearch] = useState("")
  const [isOpen, setIsOpen] = useState(false)
  const [recentSearches, setRecentSearches] = useState<string[]>([])

  useEffect(() => {
    const saved = localStorage.getItem("recentTimezones")
    if (saved) {
      setRecentSearches(JSON.parse(saved))
    }
  }, [])

  const filteredTimezones = useMemo(() => {
    if (!search) return []
    return TIMEZONES.filter((tz) => tz.toLowerCase().includes(search.toLowerCase())).slice(0, 8)
  }, [search])

  const handleSelect = (timezone: string) => {
    onSelect(timezone)

    const updated = [timezone, ...recentSearches.filter((t) => t !== timezone)].slice(0, 5)
    setRecentSearches(updated)
    localStorage.setItem("recentTimezones", JSON.stringify(updated))

    setSearch("")
    setIsOpen(false)
  }

  const removeRecent = (timezone: string) => {
    const updated = recentSearches.filter((t) => t !== timezone)
    setRecentSearches(updated)
    localStorage.setItem("recentTimezones", JSON.stringify(updated))
  }

  return (
    <div className="mb-8 relative">
      <div className="space-y-2">
        <label className="text-sm font-medium text-muted-foreground">Search timezone</label>
        <div className="relative">
          <Input
            type="text"
            placeholder="e.g., America/New_York, Europe/London..."
            value={search}
            onChange={(e) => {
              setSearch(e.target.value)
              setIsOpen(true)
            }}
            onFocus={() => setIsOpen(true)}
            className="w-full"
          />
          {isOpen && filteredTimezones.length > 0 && (
            <div className="absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded-md shadow-lg z-10">
              {filteredTimezones.map((tz) => (
                <button
                  key={tz}
                  onClick={() => handleSelect(tz)}
                  className="w-full text-left px-4 py-2 hover:bg-muted transition-colors text-sm"
                >
                  {tz}
                </button>
              ))}
            </div>
          )}
        </div>
      </div>

      {recentSearches.length > 0 && (
        <div className="mt-4 space-y-2">
          <p className="text-xs font-medium text-muted-foreground">Recent Searches</p>
          <div className="flex flex-wrap gap-2">
            {recentSearches.map((tz) => (
              <button
                key={tz}
                onClick={() => handleSelect(tz)}
                className="inline-flex items-center gap-2 px-3 py-1 bg-muted rounded-full text-sm text-foreground hover:bg-muted/80 transition-colors"
              >
                {tz.split("/")[1]}
                <button
                  onClick={(e) => {
                    e.stopPropagation()
                    removeRecent(tz)
                  }}
                  className="ml-1"
                >
                  <X className="w-3 h-3" />
                </button>
              </button>
            ))}
          </div>
        </div>
      )}
    </div>
  )
}
